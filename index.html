<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thousand Organ</title>

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
      background-color: #ffffff;
      color: #111;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    header {
      text-align: center;
      margin-bottom: 60px;
    }

    header h1 {
      font-size: 2rem;
      margin-bottom: 16px;
      letter-spacing: 0.05em;
    }

    header p {
      font-size: 1rem;
      color: #555;
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.8;
    }

    .contents {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 24px;
    }

    .content-card {
      border: 1px solid #e5e5e5;
      padding: 32px 24px;
      text-align: center;
      transition: background-color 0.2s ease;
    }

    .content-card:hover {
      background-color: #fafafa;
    }

    .content-card h2 {
      font-size: 1.2rem;
      margin-bottom: 12px;
    }

    .content-card p {
      font-size: 0.9rem;
      color: #555;
      line-height: 1.6;
    }

    footer {
      text-align: center;
      margin-top: 80px;
      font-size: 0.8rem;
      color: #666;
    }

    @media (min-width: 900px) {
      body {
        background-color: #f5f5f5;
      }

      .container {
        background-color: #ffffff;
      }
    }

    /* ===== Latest Illustrations ===== */
    .latest-illust {
      margin-bottom: 60px;
    }

    .latest-illust h2 {
      font-size: 1.2rem;
      margin-bottom: 16px;
      letter-spacing: 0.04em;
      text-align: center;
    }

    .latest-illust-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    .latest-illust-grid a {
      display: block;
      border: 1px solid #e5e5e5;
      background: #fff;
      overflow: hidden;
      transition: opacity 0.2s ease;
    }

    .latest-illust-grid a:hover {
      opacity: 0.9;
    }

    .latest-illust-grid img {
      width: 100%;
      display: block;
    }

    .latest-illust-more {
      margin-top: 12px;
      text-align: right;
      font-size: 0.9rem;
    }

    .latest-illust-more a {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .latest-illust-grid {
        grid-template-columns: 1fr;
      }
    }

    /* ===== Latest Updates ===== */
    .latest-updates {
      margin-bottom: 80px;
    }

    .latest-updates h2 {
      font-size: 1.2rem;
      margin-bottom: 16px;
      letter-spacing: 0.04em;
      text-align: center;
    }

    .updates-scroll {
      display: flex;
      gap: 16px;
      overflow-x: auto;
      padding: 8px 2px 12px;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
    }

    .updates-scroll::-webkit-scrollbar {
      height: 6px;
    }

    .updates-scroll::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 3px;
    }

    .update-card {
      min-width: 200px;
      max-width: 200px;
      border: 1px solid #e5e5e5;
      background: #fff;
      scroll-snap-align: start;
      flex-shrink: 0;
      transition: background-color 0.2s ease;
    }

    .update-card:hover {
      background-color: #fafafa;
    }

    .update-card img {
      width: 100%;
      display: block;
      aspect-ratio: 16 / 9;
      object-fit: cover;
      background: #ddd;
    }

    .update-card .info {
      padding: 12px;
      text-align: left;
    }

    .update-card .type {
      font-size: 0.75rem;
      color: #666;
      margin-bottom: 6px;
    }

    .update-card .title {
      font-size: 0.92rem;
      line-height: 1.4;
      color: #111;
    }

    .update-card .date {
      font-size: 0.78rem;
      color: #777;
      margin-top: 8px;
    }

    .updates-more {
      margin-top: 12px;
      text-align: right;
      font-size: 0.9rem;
    }

    .updates-more a {
      text-decoration: underline;
    }

    /* moreã‚«ãƒ¼ãƒ‰ */
    .update-card.update-more {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .update-card.update-more .more-box {
      width: 100%;
      height: 100%;
      padding: 28px 12px;
      text-align: center;
      font-size: 0.95rem;
      color: #111;
      letter-spacing: 0.04em;
    }
  </style>
</head>

<body>
  <div class="container">

    <header>
      <h1>Thousand Organ</h1>
      <p>
        å€‹äººã§åˆ¶ä½œã—ã¦ã„ã‚‹æ¼«ç”»ãƒ»ã‚¤ãƒ©ã‚¹ãƒˆãƒ»ã‚²ãƒ¼ãƒ ã‚’ã¾ã¨ã‚ãŸã‚µã‚¤ãƒˆã§ã™ã€‚<br />
        ä½œå“ã®ä¸–ç•Œè¦³ã¨ç‰©èªã‚’ã€é™ã‹ã«æ¥½ã—ã‚“ã§ã‚‚ã‚‰ãˆã‚‹å ´æ‰€ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚
      </p>
    </header>

    <section class="latest-illust">
      <h2>Latest Illustrations</h2>
      <div class="latest-illust-grid" id="latestIllustGrid"></div>
      <div class="latest-illust-more">
        <a href="illust/index.html">more â†’</a>
      </div>
    </section>

    <section class="latest-updates">
      <h2>Latest Updates</h2>

      <div class="updates-scroll" id="updatesScroll"></div>

      <div class="updates-more">
        <a href="updates/index.html">more â†’</a>
      </div>
    </section>

    <main class="contents">
      <a class="content-card" href="comic/index.html">
        <h2>æ¼«ç”»</h2>
        <p>
          é€£è¼‰ãƒ»èª­åˆ‡æ¼«ç”»ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚<br />
          å„ä½œå“ã”ã¨ã«ã€è©±æ•°é †ã§èª­ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚
        </p>
      </a>

      <a class="content-card" href="illust/index.html">
        <h2>ã‚¤ãƒ©ã‚¹ãƒˆ</h2>
        <p>
          ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚¤ãƒ©ã‚¹ãƒˆã®å±•ç¤ºãƒšãƒ¼ã‚¸ã§ã™ã€‚<br />
          ã‚¿ã‚°ã«ã‚ˆã‚‹çµã‚Šè¾¼ã¿ãŒå¯èƒ½ã§ã™ã€‚
        </p>
      </a>

      <a class="content-card" href="game/index.html">
        <h2>ã‚²ãƒ¼ãƒ </h2>
        <p>
          å€‹äººåˆ¶ä½œã‚²ãƒ¼ãƒ ã®ç´¹ä»‹ãƒšãƒ¼ã‚¸ã§ã™ã€‚<br />
          å¤–éƒ¨ã‚µã‚¤ãƒˆã¸ã®ãƒªãƒ³ã‚¯ã‚’æ²è¼‰ã—ã¦ã„ã¾ã™ã€‚
        </p>
      </a>

      <p style="text-align:center; margin: 22px 0 0;">
        <a href="worlds/index.html" style="text-decoration: underline; color:#444;">ä¸–ç•Œè¦³ä¸€è¦§ã‚’è¦‹ã‚‹ â†’</a>
      </p>
    </main>

    <footer>
      <p>Â© 2025 Organ All rights reserved</p>
    </footer>

  </div>

  <script src="data/illust.js"></script>
  <script src="data/updates.js"></script>

  <script>
    // ===== æœ€æ–°ã‚¤ãƒ©ã‚¹ãƒˆ3æš =====
    (function renderLatestIllusts() {
      const grid = document.getElementById('latestIllustGrid');
      if (!grid) return;

      const illusts = (window.ILLUSTS || []).slice();
      if (illusts.length === 0) return;

      // dateãŒã‚ã‚Œã°dateã€ãªã‘ã‚Œã°é…åˆ—æœ«å°¾ãŒæ–°ã—ã„æƒ³å®š
      const hasDate = illusts.some(i => i.date);
      if (hasDate) {
        illusts.sort((a, b) => String(b.date || '').localeCompare(String(a.date || '')));
      } else {
        illusts.reverse();
      }

      const latest = illusts.slice(0, 3);

      grid.innerHTML = '';
      latest.forEach(item => {
        const a = document.createElement('a');
        a.href = `illust/view.html?id=${encodeURIComponent(item.id)}`;

        const img = document.createElement('img');
        img.src = `illust/${item.image}`;   // item.image ã¯ "images/..." å‰æ
        img.alt = item.title || 'illustration';
        img.loading = 'lazy';

        a.appendChild(img);
        grid.appendChild(a);
      });
    })();

    // ===== æœ€æ–°æ›´æ–°ï¼ˆæœ€å¤§10ä»¶ï¼‰æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« =====
    (function renderLatestUpdates() {
      const container = document.getElementById('updatesScroll');
      if (!container) return;

      const updates = (window.UPDATES || []).slice();
      if (updates.length === 0) return;

      updates.sort((a, b) => String(b.date || '').localeCompare(String(a.date || '')));

      container.innerHTML = '';
      updates.slice(0, 10).forEach(item => {
        const a = document.createElement('a');
        a.href = item.link;
        a.className = 'update-card';

        const img = document.createElement('img');
        img.src = item.image; // updates.jsã¯ã‚µã‚¤ãƒˆç›´ä¸‹åŸºæº–ãƒ‘ã‚¹ã§çµ±ä¸€
        img.alt = item.title || 'update';
        img.loading = 'lazy';

        const info = document.createElement('div');
        info.className = 'info';

        const type = document.createElement('div');
        type.className = 'type';
        type.textContent =
          item.type === 'illust' ? 'ğŸ–¼ Illustration' :
            item.type === 'comic' ? 'ğŸ“– Comic' :
              item.type === 'game' ? 'ğŸ® Game' : 'Update';

        const title = document.createElement('div');
        title.className = 'title';
        title.textContent = item.title || '';

        const date = document.createElement('div');
        date.className = 'date';
        date.textContent = item.date || '';

        info.appendChild(type);
        info.appendChild(title);
        info.appendChild(date);

        a.appendChild(img);
        a.appendChild(info);

        container.appendChild(a);
      });

      // æœ€å¾Œã«ã€Œmore â†’ã€ã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ 
      const more = document.createElement('a');
      more.href = 'updates/index.html';
      more.className = 'update-card update-more';

      const moreBox = document.createElement('div');
      moreBox.className = 'more-box';
      moreBox.textContent = 'more â†’';

      more.appendChild(moreBox);
      container.appendChild(more);

    })();
  </script>

</body>

</html>