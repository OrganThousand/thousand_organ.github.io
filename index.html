<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thousand Organ</title>

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
      background-color: #ffffff;
      color: #111;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    header {
      text-align: center;
      margin-bottom: 60px;
    }

    header h1 {
      font-size: 2rem;
      margin-bottom: 16px;
      letter-spacing: 0.05em;
    }

    header p {
      font-size: 1rem;
      color: #555;
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.8;
    }

    .contents {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 24px;
    }

    .content-card {
      border: 1px solid #e5e5e5;
      padding: 32px 24px;
      text-align: center;
      transition: background-color 0.2s ease;
    }

    .content-card:hover {
      background-color: #fafafa;
    }

    .content-card h2 {
      font-size: 1.2rem;
      margin-bottom: 12px;
    }

    .content-card p {
      font-size: 0.9rem;
      color: #555;
      line-height: 1.6;
    }

    footer {
      text-align: center;
      margin-top: 80px;
      font-size: 0.8rem;
      color: #666;
    }

    @media (min-width: 900px) {
      body {
        background-color: #f5f5f5;
      }

      .container {
        background-color: #ffffff;
      }
    }

    /* ===== Latest Illustrations ===== */
    .latest-illust {
      margin-bottom: 60px;
    }

    .latest-illust h2 {
      font-size: 1.2rem;
      margin-bottom: 16px;
      letter-spacing: 0.04em;
      text-align: center;
    }

    .latest-illust-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    .latest-illust-grid a {
      display: block;
      border: 1px solid #e5e5e5;
      background: #fff;
      overflow: hidden;
      transition: opacity 0.2s ease;
    }

    .latest-illust-grid a:hover {
      opacity: 0.9;
    }

    .latest-illust-grid img {
      width: 100%;
      display: block;
    }

    .latest-illust-more {
      margin-top: 12px;
      text-align: right;
      font-size: 0.9rem;
    }

    .latest-illust-more a {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .latest-illust-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <div class="container">

    <header>
      <h1>Thousand Organ</h1>
      <p>
        個人で制作している漫画・イラスト・ゲームをまとめたサイトです。<br />
        作品の世界観と物語を、静かに楽しんでもらえる場所を目指しています。
      </p>
    </header>

    <section class="latest-illust">
      <h2>Latest Illustrations</h2>
      <div class="latest-illust-grid" id="latestIllustGrid"></div>
      <div class="latest-illust-more">
        <a href="illust/index.html">more →</a>
      </div>
    </section>

    <main class="contents">
      <a class="content-card" href="comic/index.html">
        <h2>漫画</h2>
        <p>
          連載・読切漫画をまとめています。<br />
          各作品ごとに、話数順で読むことができます。
        </p>
      </a>

      <a class="content-card" href="illust/index.html">
        <h2>イラスト</h2>
        <p>
          オリジナルイラストの展示ページです。<br />
          タグによる絞り込みが可能です。
        </p>
      </a>

      <a class="content-card" href="game/index.html">
        <h2>ゲーム</h2>
        <p>
          個人制作ゲームの紹介ページです。<br />
          外部サイトへのリンクを掲載しています。
        </p>
      </a>
    </main>

    <footer>
      <p>© 2025 Organ All rights reserved</p>
    </footer>

  </div>

  <script src="illust/data.js"></script>

  <script>
    (function renderLatestIllusts() {
      const grid = document.getElementById('latestIllustGrid');
      if (!grid) return;

      const illusts = (window.ILLUSTS || []).slice();
      if (illusts.length === 0) return;

      // 新着判定：date があれば date、なければ配列末尾が新しい想定
      const hasDate = illusts.some(i => i.date);
      if (hasDate) {
        illusts.sort((a, b) =>
          String(b.date || '').localeCompare(String(a.date || ''))
        );
      } else {
        illusts.reverse();
      }

      const latest = illusts.slice(0, 3);

      grid.innerHTML = '';
      latest.forEach(item => {
        const a = document.createElement('a');
        a.href = `illust/view.html?id=${encodeURIComponent(item.id)}`;

        const img = document.createElement('img');
        img.src = `illust/${item.image}`;
        img.alt = item.title || 'illustration';
        img.loading = 'lazy';

        a.appendChild(img);
        grid.appendChild(a);
      });
    })();
  </script>
</body>

</html>